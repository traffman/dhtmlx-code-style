# Rules

## 1. Syntax

### 1.1.1
Всегда должна быть некая точка входа (например файл common.js). Этот файл служит сугубо для того, чтобы инициализировать необходимые для начала компоненты на странице, а также некоторые общие эвенты и проперти (конфиг, который не будет меняться на протяжении работы с приложением)
```js 
	var mainLayout;
	dhtmlxEvent(window, 'load', doOnLoad);
	dhtmlxEvent(window, 'unload', doOnUnload);
```

### 1.1.2
Перед началом разработки прикинуть, на какое количество логических модулей можно разбить приложение. Стоит следовать правилу 1 модуль = 1 блок (целл/ячейка) 

![alt tag](https://github.com/traffman/dhtmlx-code-style/blob/master/1.1.2.png)

### 1.1.3
Все общение между модулями строится на эвентах, а именно:
```js 
	dhx4.attachEvent(‘a’, doOnA);// бинд эвента а 				
	dhx4.callEvent(‘a’, []); //вызов эвента а 
```

### 1.1.4
Модуль должен быть независем, а именно - если его потребуется перенести в другое место(например, перекинуть в другую ячейку\целл), отключить и т.п. максимум что должно измениться в коде - посылаемый в функцию контейнер(ячейка, целл) для инициализации модуля или же удаление эвента.

### 1.1.5
Создавать только один экземпляр объекта dhtmlxwindow и последующие действия выполнять с ним 
```js 
	CM.W = new dhtmlXWindows();//где-то в конфиге
	var a =  CM.W.createWindow("а", x, y,w,h);
```

### 1.1.6
“Чистить” все ненужные данные, а также при unload страницы - убивать ВСЕ кастомное на странице. Допустим, в таком случае нужно лишь вызвать unload у mainLayout, он сам позатирает все, что было добавлено в Layout через attach (attachTabbar\grid\etc). Кастомные обработчики же могут не очистится из памяти при перезагрузке страницы, поэтому необходимо убивать их руками 	```js 
	function doOnUnload() {
		if(mainLayout)
			{mainLayout.unload();mainLayout = null;}
	}
	this.consWin.attachEvent('onClose', function(){
		_this.calendar.unload();
		return true;
	});//ф-я убивает кастомный календарь при закрытии окна
```js

Временные переменные, в которых хранятся объекты гридов\окон и т.д. которые не нужны вне ф-и - чистить в конце ф-и
```js 
		t = temp = null;
```js 
_this/self при анлоде тоже необходимо затирать
